# ah-fs.processor [![build status](https://secure.travis-ci.org/nodesource/ah-fs.processor.png)](http://travis-ci.org/nodesource/ah-fs.processor)

Processes ah-fs data obtained from async resources related to file system opearations.

## Installation

    npm install ah-fs.processor

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [API](#api)
  - [ReadFileProcessor](#readfileprocessor)
  - [readFileProcessor.process](#readfileprocessorprocess)
  - [Groups](#groups)
  - [Operations](#operations)
    - [`fs.readFile` specific Operation Properties](#fsreadfile-specific-operation-properties)
    - [General Operation Properties](#general-operation-properties)
  - [Sample Return Value](#sample-return-value)
  - [ReadFileProcessor.operationSteps](#readfileprocessoroperationsteps)
  - [ReadFileOperation](#readfileoperation)
  - [readFileOperation.\_processOpen](#readfileoperation%5C_processopen)
  - [readFileOperation.\_processStat](#readfileoperation%5C_processstat)
  - [readFileOperation.\_processRead](#readfileoperation%5C_processread)
  - [readFileOperation.\_processClose](#readfileoperation%5C_processclose)
  - [readFileOperation.summary](#readfileoperationsummary)
  - [Properties Specific to `fs.readFile`](#properties-specific-to-fsreadfile)
  - [ReadStreamProcessor](#readstreamprocessor)
  - [readStreamProcessor.process](#readstreamprocessorprocess)
  - [Groups](#groups-1)
  - [Operations](#operations-1)
    - [`fs.createReadStream` specific Operation Properties](#fscreatereadstream-specific-operation-properties)
    - [General Operation Properties](#general-operation-properties-1)
  - [Sample Return Value](#sample-return-value-1)
  - [ReadStreamProcessor.operationSteps](#readstreamprocessoroperationsteps)
  - [utils.idsTriggeredBy](#utilsidstriggeredby)
  - [utils.prettyNs](#utilsprettyns)
  - [utils.safeGetVal](#utilssafegetval)
  - [utils.uniqueUserFunctions](#utilsuniqueuserfunctions)
  - [utils.separateUserFunctions](#utilsseparateuserfunctions)
  - [utils.mergeUserFunctions](#utilsmergeuserfunctions)
  - [ReadStreamOperation](#readstreamoperation)
  - [readStreamOperation.\_processOpen](#readstreamoperation%5C_processopen)
  - [readStreamOperation.\_processTick](#readstreamoperation%5C_processtick)
  - [readStreamOperation.\_processRead](#readstreamoperation%5C_processread)
  - [readStreamOperation.\_processClose](#readstreamoperation%5C_processclose)
  - [readStreamOperation.summary](#readstreamoperationsummary)
  - [Properties Specific to `fs.createReadStream`](#properties-specific-to-fscreatereadstream)
- [License](#license)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## [API](https://nodesource.github.io/ah-fs.processor)

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### ReadFileProcessor

Instantiates an fs.readFile data processor to process data collected via
[nodesource/ah-fs](https://github.com/nodesource/ah-fs)

**Parameters**

-   `$0` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
-   `includeActivities` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** if `true` the actual activities are appended to the output (optional, default `false`)

### readFileProcessor.process

Processes the supplied async activities and splits them into
groups, and operations each representing a file read `fs.readFile`.

### Groups

The returned value has a `groups` property which just lists the ids
of async resources that were grouped together to form an operation
indexed by the `fd` on which the readFile operated.
Thus the `groups` is a map of sets.
If no file read was encountered the groups are empty.

### Operations

Additionally an `operations` property is included as well. Each operation
represents one full `fs.readFile` execution. There will be one operation per
group and they are indexed by the corresponding `fd` as well.

An `operation` has the following properties:

#### `fs.readFile` specific Operation Properties

 Data about the async resources that were part of the operation, by default
 only `id` and `triggerId` are included:

-   **open**: contains data about opening the file
-   **stat**: contains data about getting file stats
-   **read**: contains data about reading the file
-   **close**: contains data about closing the file

#### General Operation Properties

The information below is the same for all `operation`s and thus is only
mentioned here and linked from the documentation of all other processors.

 Data about the lifetime of the operation:

-   **lifeCycle**: contains three timestamps that detail when an operation was created,
    for how long it was alive and when it was destroyed.

    -   **created**: the timestamp when the first resource of the operation was created
    -   **destroyed**: the timestamp when the last resource of the operation was destroyed
    -   **timeAlive**: the difference between the `destroyed` and `created` timestamps, i.e.
        how long the operation's resources were alive

    Each timestamp has the following two properties provided by [utils.prettyNs](#utilsprettyns).

    -   **ns**: time in nanoseconds {Number}
    -   **ms**: pretty printed time in milliseconds {String}

Data that links to user code that is responsible for the operation occurring.

-   **createdAt**: provides the line of code that called `fs.readFile`
-   **userFunctions**: depending on the settings (see constructor docs) each resource
    will include it's own array of userFunctions or they are separated out into
    one property with duplicates merged. The latter is the default behavior.
    In either case `userFunctions` is an Array of Objects with the following properties:

    -   **name**: the function name
    -   **inferredName**: the inferred function name, only needed if the `name` is not set
    -   **file**: the file in which the function was defined
    -   **line**: the line on which the functino was defined in that file
    -   **column**: the column on which the functino was defined in that file
    -   **location**: the file and line + column where the function was defined combined into a string
    -   **args**: the `err` and information about the `res` of the operation
        with which the function was invoked
    -   **propertyPaths**: the object paths at which the function was found, these could be multiple
        since the function could've been attached to multiple resources (only available if the functions
        were separated from the resources and merged)
    -   **propertyPath**: the object path at which the function was found (only available if the
        functions weren't separated and thus are still part of each resource)

### Sample Return Value

The sample return value was created with default options.

```js
{ groups: Map { 17 => Set { 10, 11, 12, 13 } },
  operations:
    Map {
      17 => { lifeCycle:
        { created: { ms: '44.12ms', ns: 44119000 },
          destroyed: { ms: '85.95ms', ns: 85955000 },
          timeAlive: { ms: '41.84ms', ns: 41836000 } },
      createdAt: 'at Test.<anonymous> (/Volumes/d/dev/js/async-hooks/ah-fs/test/read-one-file.js:36:6)',
      open: { id: 10, triggerId: 1 },
      stat: { id: 11, triggerId: 10 },
      read: { id: 12, triggerId: 11 },
      close: { id: 13, triggerId: 12 },
      userFunctions:
        [ { file: '/Volumes/d/dev/js/async-hooks/ah-fs/test/read-one-file.js',
            line: 39,
            column: 17,
            inferredName: '',
            name: 'onread',
            location: 'onread (/Volumes/d/dev/js/async-hooks/ah-fs/test/read-one-file.js:39:17)',
            args:
            { '0': null,
              '1':
                { type: 'Buffer',
                  len: 6108,
                  included: 18,
                  val:
                  { utf8: 'const test = requi',
                    hex: '636f6e73742074657374203d207265717569' } },
              proto: 'Object' },
            propertyPaths:
            [ 'open.resource.context.callback',
              'stat.resource.context.callback',
              'read.resource.context.callback',
              'close.resource.context.callback' ] } ] } } }
```

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about `fs.readFile` operations with the
structure outlined above

### ReadFileProcessor.operationSteps

The minimum number of steps, represented as an async resource each,
involved to execute `fs.readFile`.

This can be used by higher level processors to group
activities looking for larger operations first and then
operations involving less steps.

Steps are: open, stat, read+, close

### ReadFileOperation

Processes a group of async activities that represent a fs read stream operation.
It is used by the [ReadFileProcessor](#readfileprocessor) as part of `process`.

Four operation steps are derived from the group, each providing some information
about the operation in question.

Each step is processed into an operation in the corresponding private method, i.e. `_processOpen`.
These methods are documented below for information's sake, they should not be called directly,
nor should you have a need to directly instantiate a `ReadFileOperation` in the first place.

**Parameters**

-   `group` **[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)&lt;[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number), [Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)&lt;[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>>** the ids of the activities that were part of the operation
-   `includeActivities` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** if `true` the activities are attached to
    each operation step (optional, default `false`)

### readFileOperation.\_processOpen

The open resource tells us where in user code the `fs.readFile` originated
via the second frame of the stack trace, as well as when the operation
was created.

Additionally it has the same user functions attached as all the other resources.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about the open step, pre-processed by the `ReadFileProcessor`.

### readFileOperation.\_processStat

The stat resource gives us no interesting information.
Therefore we just capture the `id`, `triggerId` and `userFunctions` and if so desired
attach the activities.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about the open step, pre-processed by the `ReadFileProcessor`.

### readFileOperation.\_processRead

The read resource gives us no interesting information.
Therefore we just capture the `id`, `triggerId` and `userFunctions` and if so desired
attach the activities.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about the read step, pre-processed by the `ReadFileProcessor`.

### readFileOperation.\_processClose

The main information we pull from the close resource is the `destroy` timestamp.

Combined with the `init` timestamp of the open resource it allows us to deduce how long
the file read took.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about the close step, pre-processed by the `ReadFileProcessor`.

### readFileOperation.summary

Returns the summary of processing the group into an operation.

The summary of all operations has a very similar structure, but includes some properties that are specific to this
particular operation.

The general properties `lifeCycle` and `createdAt` are documented as part of
the `ReadFileProcessor`.
Therefore learn more [here](#general-operation-properties).

### Properties Specific to `fs.readFile`

-   **open**: see `readFileOperation._processOpen`
-   **stat**: see `readFileOperation._processStat`
-   **read**: see `readFileOperation._processRead`
-   **close**: see `readFileOperation._processClose`

**Parameters**

-   `$0` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** options
    -   `$0.separateFunctions` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** when `true` the user functions are separated out
        from the specific operations and attached as a `userFunctions` array directly to the returned
        result (optional, default `true`)
    -   `$0.mergeFunctions` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** if `true` when a duplicate function is found in the
        separated functions Array, they are merged into one while preserving all information
        from both version. Note that this setting only activates if `separateFunctions` is `true` as well. (optional, default `true`)

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** all important information about the current operation

### ReadStreamProcessor

Instantiates an fs.createReadStream data processor to process data collected via
[nodesource/ah-fs](https://github.com/nodesource/ah-fs)

**Parameters**

-   `$0` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
-   `includeActivities` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** if `true` the actual activities are appended to the output (optional, default `false`)

### readStreamProcessor.process

Processes the supplied async activities and splits them into
groups, and operations each representing a file read stream `fs.createReadStream`.

### Groups

The returned value has a `groups` property which just lists the ids
of async resources that were grouped together to form an operation
indexed by the `fd` on which the readFile operated.
Thus the `groups` is a map of sets.
If no file read stream was encountered the groups are empty.

### Operations

Additionally an `operations` property is included as well. Each operation
represents one full `fs.createReadStream` execution. There will be one operation per
group and they are indexed by the corresponding `fd` as well.

An `operation` has the following properties:

#### `fs.createReadStream` specific Operation Properties

 Data about the async resources that were part of the operation, by default
 only `id` and `triggerId` are included:

-   **open**: contains data about opening the file
-   **stream**: contains data about how the stream was configured, including readable state and
    the path to the file being read, pipes count, encoding, etc.
-   **reads**: an Array of reads, each containing data about reading a chunk from the file including
    the time spent to complete reading the particular chunk
-   **close**: contains data about closing the file

#### General Operation Properties

-   [see ReadFileProcessor.process](https://nodesource.github.io/ah-fs.processor/#general-operation-properties)

### Sample Return Value

The sample return value was created with default options.

```js
{ groups: Map { 10 => Set { 10, 12, 13, 14, 16 } },
  operations:
  Map {
    10 => { lifeCycle:
      { created: { ms: '1.60ms', ns: 1600000 },
        destroyed: { ms: '14.33ms', ns: 14329000 },
        timeAlive: { ms: '12.73ms', ns: 12729000 } },
    createdAt: 'at Test.<anonymous> (/Volumes/d/dev/js/async-hooks/ah-fs/test/readstream-one-file.js:94:6)',
    open: { id: 10, triggerId: 3 },
    stream:
      { id: 14,
        triggerId: 12,
        path: '/Volumes/d/dev/js/async-hooks/ah-fs/test/readstream-one-file.js',
        flags: 'r',
        fd: 19,
        objectMode: false,
        highWaterMark: 65536,
        pipesCount: 0,
        defaultEncoding: 'utf8',
        encoding: null },
    reads:
      [ { id: 12,
          triggerId: 10,
          timeSpent: { ms: '0.83ms', ns: 830000 } },
        { id: 13,
          triggerId: 12,
          timeSpent: { ms: '0.24ms', ns: 240000 } } ],
    close: { id: 16, triggerId: 13 },
    userFunctions:
      [ { file: '/Volumes/d/dev/js/async-hooks/ah-fs/test/readstream-one-file.js',
          line: 99,
          column: 16,
          inferredName: '',
          name: 'onend',
          location: 'onend (/Volumes/d/dev/js/async-hooks/ah-fs/test/readstream-one-file.js:99:16)',
          args: null,
          propertyPaths: [ 'stream.resource.args[0]._events.end[1]' ] },
        { file: '/Volumes/d/dev/js/async-hooks/ah-fs/test/readstream-one-file.js',
          line: 98,
          column: 17,
          inferredName: '',
          name: 'ondata',
          location: 'ondata (/Volumes/d/dev/js/async-hooks/ah-fs/test/readstream-one-file.js:98:17)',
          args: null,
          propertyPaths: [ 'stream.resource.args[0]._events.data' ] } ] } } }
```

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about `fs.createReadStream` operations with the
structure outlined above

### ReadStreamProcessor.operationSteps

The minimum number of steps, represented as an async resource each,
involved to execute `fs.createReadStream`.

This can be used by higher level processors to group
activities looking for larger operations first and then
operations involving less steps.

Steps are: open, stream+, read+, close

### utils.idsTriggeredBy

Finds all ids of activities that are triggered by the given id.
This function works recursive, i.e. any activity triggered by
a child of the root activity is included as well.

For this to work, activities are assumed to be in the order that
they were triggered. This can easily be achieved by simply sorting
the activities by their init timestamp.

**Parameters**

-   `activities` **[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number), Activity>** collected via [ah-fs](https://github.com/nodesource/ah-fs)
-   `id` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** the id of the root activity we whose triggered _children_ we are trying to find
-   `stop` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** a predicate that will finish the activity walk if it returns `true`.
     Function signature: `(id, activity)`.

Returns **[Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** the provided root id and all ids of activities triggered by it or any of it's children,
grandchildren, etc.

### utils.prettyNs

Prettifies the provided timestamp which is expected to be in nanoseconds.

**Parameters**

-   `ns` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** timestamp in nanoseconds

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)&lt;[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String), [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** an object with an `ms` property which is the prettified version
of the provided timestamp in milliseconds and `ns`, the originally passed timestamp.

### utils.safeGetVal

Safely extracts the `val` property from the object `x`.

**Parameters**

-   `x` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the object which has the `val` property

Returns **any** the `val` property if `x` was defined, otherwise `null`

### utils.uniqueUserFunctions

Identifies all user functions within the given functions, adds location and
propertyPath strings and returns the result.

The `propertyPath` is deduced from the `path` array.

If a user function is found twice it will only be included once.

**Parameters**

-   `fns` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)>** all functions found attached to a particular async resource
-   `$0` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** options
    -   `$0.pathPrefix` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** prefix used for the property paths (optional, default `'root'`)

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)>** all user functions with the above mentioned details added

### utils.separateUserFunctions

Pulls user functions from all resources of the provided info and attaches
them as the `userFunctions` property to the info object directly.

As a result, instead of having a `userFunctions` array on each resource
we end up with just one on the info object.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the info object which references the resources

### utils.mergeUserFunctions

Merges the `userFunctions` found on the `info` object, such that all functions
with the same `location` property are represented as one.

As the result the `propertyPath` array is removed from all functions and replaced
with the `propertyPaths` array which combines the `propertyPath`s of all functions
that matched the `location`.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the object that references the `userFunctions` property

### ReadStreamOperation

Processes a group of async activities that represent a fs read stream operation.
It is used by the [ReadStreamProcessor](#readstreamprocessor) as part of `process`.

Four operation steps are derived from the group, each providing some information
about the operation in question.

Each step is processed into an operation in the corresponding private method, i.e. `_processOpen`.
These methods are documented below for information's sake, they should not be called directly,
nor should you have a need to directly instantiate a `ReadStreamOperation` in the first place.

**Parameters**

-   `group` **[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)&lt;[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number), [Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)&lt;[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>>** the ids of the activities that were part of the operation
-   `includeActivities` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** if `true` the activities are attached to
    each operation step (optional, default `false`)

### readStreamOperation.\_processOpen

An open doesn't have too much info, but we can glean two very important
 data points:

1.  the init timestamp tells us when the stream was created
2.  the last frame of the init stack tells us where `createReadStream` was called.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about the open step, pre-processed by the `ReadStreamProcessor`.

### readStreamOperation.\_processTick

The ReadStream Tick gives us a lot of information. It has an args array with
the ReadStream and its ReadableState respectively

The ReadStream provides us the following:

1.  the path to the file we are streaming
2.  the flags with which the file was opened
3.  the fd (assuming we are dealing with the tick triggered indirectly by the open)

All callbacks on the \_events of the ReadStream have been removed, but are present
inside the functions object (see below).

The ReadableState provides us the following:

1.  objectMode `true|false`
2.  highWaterMark
3.  pipesCount
4.  defaultEncoding, i.e. utf8
5.  encoding, i.e. utf8

The information extracted from the tick is attached to a `stream` property
provided with the `summary`.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about the tick step, pre-processed by the `ReadStreamProcessor`.

### readStreamOperation.\_processRead

The read resource doesn't give us too much information.

The stack traces originate in core and we don't see any registred
user callbacks, as those are present on the stream instead.
However we can count the amount of reads that occurred and deduce how
long each read took from the `before` and `after` timestamps.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about the read step, pre-processed by the `ReadStreamProcessor`.

### readStreamOperation.\_processClose

The main information we pull from the close resource is the `destroy` timestamp.

Combined with the `init` timestamp of the open resource it allows us to deduce how long
the read stream was active.

**Parameters**

-   `info` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** information about the close step, pre-processed by the `ReadStreamProcessor`.

### readStreamOperation.summary

Returns the summary of processing the group into an operation.

The summary of all operations has a very similar structure, but includes some properties that are specific to this
particular operation.

The general properties `lifeCycle` and `createdAt` are documented as part of
the `ReadFileProcessor`.
Therefore learn more [here](#general-operation-properties).

### Properties Specific to `fs.createReadStream`

-   **open**: see `readStreamOperation._processOpen`
-   **stream**: see `readStreamOperation._processTick`
-   **read**: see `readStreamOperation._processRead`
-   **close**: see `readStreamOperation._processClose`

**Parameters**

-   `$0` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** options
    -   `$0.separateFunctions` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** when `true` the user functions are separated out
        from the specific operations and attached as a `userFunctions` array directly to the returned
        result (optional, default `true`)
    -   `$0.mergeFunctions` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** if `true` when a duplicate function is found in the
        separated functions Array, they are merged into one while preserving all information
        from both version. Note that this setting only activates if `separateFunctions` is `true` as well. (optional, default `true`)

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** all important information about the current operation

## License

MIT
